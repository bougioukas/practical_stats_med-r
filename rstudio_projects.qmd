# Working with R scripts and RStudio Projects {#sec-rstudio_projects}

When we have finished this Chapter, we should be able to:

::: {.callout-caution icon="false"}
## Learning objectives

-   Describe the purpose and use of each pane in the RStudio IDE.
-   Understand the differences between errors, warnings, and messages in R.
-   Seek for help.
-   Work with R projects.
:::

 

## Open a new R script

Usually, we write our code in R script files. An R script (with the `.R` extension) is simply a text file in which the R code is saved, and then it can be executed on the R console.

::: column-margin
**Advantages of writing code in a R script file**

-   We can write code chunks instead of typing one line of code at a time
-   We can save and reuse our code
-   We can document our script (however, we can only include one-line comments and these must be prefixed with the hashtag symbol, #)
-   We can share our script with others
:::

In the RStudio menu, we go to:

```{mermaid}
flowchart LR
  A(File) -.-> B(New File) -.-> C(R Script)
```

Alternatively, we can use the keyboard shortcut {{< kbd Ctrl+Shift+N >}} for Windows/Linux (or {{< kbd Cmd+Shift+N >}} for Mac.

Another pane is opened on the left above the console pane [@fig-RStudio_4panes]. In Source Editor, we can write a length script with lots of code chunks and save the file for future use.

![RStudio Screenshot with four panes.](images/RStudio_4panes.png){#fig-RStudio_4panes width="100%"}

We can change the **size** of the panes by either clicking the minimize or maximize buttons on the top right of each pane, or by clicking and dragging the middle of the borders of the panes.

The four panes might be placed in a different order that those in @fig-RStudio_4panes. If we would like, we can change where each pane appears within RStudio under the RStudio preferences. We select from RStudio menu:

```{mermaid}
flowchart LR
  A(Tools) -.-> B(Global Options) -.-> C(Pane layout)
```

 

![RStudio Screenshot with Console on the left and Help tab in the bottom right.](images/order_panes.png){width="70%"}

From here, we can also check which tabs we would like to appear within each pane (@fig-RStudio_panes).

 

Now, let's type `14 + 16` at a new R script and press the ![](images/run.png){width="40" height="18"} button. The result is printed in the console (@fig-script1):


![The script pane.](images/script1.png){#fig-script1 width="80%"}


::: {.column-margin}

Keyboard Shortcut for commenting in/out **multiple lines** at a time: 

- {{< kbd Ctrl+Shift+C >}} for Windows/Linux

- {{< kbd Cmd+Shift+C >}} for Mac
:::


**Comments** can also be used to explain R code, and to make the script more readable. They can also be used to prevent execution when testing alternative code (@fig-script2).

![The script pane.](images/script2.png){#fig-script2 width="80%"}

Comments start with the **hashtag symbol `#`**. When executing the R-code, R will ignore anything that starts with `#`. It is considered good practice to comment our code when working in an `.R` script.

## Working with RStudio Projects

One of the advantages of RStudio IDE is that allows us to work with [RStudio Projects](https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects). The RStudio Projects are recommended for the following main reasons:

-   When we are working in R, the program needs to know where to find inputs (e.g. datasets) and deliver outputs (e.g. results, figures), and it will search first in what is called a "working directory". When the RStudio session is running through the project file (.Rproj), the current working directory points to the project's root folder.

-   RStudio Project is a powerful feature that enables to organize all the files and switch between different projects and tasks without getting the datasets, code scripts, or output files all mixed up.

Let's create our first RStudio Project to use for the rest of this textbook. From the RStudio menu select:

```{mermaid}
flowchart LR
  A(File) -.-> B(New Project...)
```

Alternatively, we can select `New Project...` from the Project's menu on the global toolbar (@fig-project1):

![Create an RStudio Project using the RStudio's Project menu](images/project1.png){#fig-project1 width="80%"}

Then, follow the steps in @fig-steps:

```{r}
#| warning: false
#| echo: false
#| out-width: 12cm
#| label: fig-steps
#| fig-cap: Steps to create an RStudio Project.
#| fig-subcap: 
#|   - "Step 1"
#|   - "Step 2"
#|   - "Step 3"
#| layout-ncol: 1

knitr::include_graphics(here::here("images", "step1.png"))

knitr::include_graphics(here::here("images", "step2.png"))

knitr::include_graphics(here::here("images", "step3.png"))
```

In Step 3 (@fig-steps c) the directory name that we type will be the project's name. We call it whatever we want, for example `my_first_project`.

Once this process is complete, we'll get a new RStudio Project just for this textbook with the name "*my_first_project*". Check that

:

 

**RStudio Project folder structure**

The files in our computer are organised into folders. RStudio Project folder can be viewed or moved around the same way we normally work with files and folders on our computer.

For our purpose, it is sufficient to consider a simple RStudio Project folder that contains the following subfolders[^rstudio_projects-1] (@fig-project2).:

[^rstudio_projects-1]: We can create new folders using the ![](images/new_folder.png){width="65" height="18"}

-   **data:** data files of any kind, such as `.csv`, `.xlsx`, `.txt`, etc.
-   **figures:** plots, diagrams, and other graphs

![The folder structure of a minimal RStudio project.](images/project2.png){#fig-project2 width="40%"}
